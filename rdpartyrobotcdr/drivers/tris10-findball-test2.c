#pragma config(Sensor, S1,     TR10FB,         sensorI2CCustom)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

/**
 * Tris10-findball.h provides an API for the Tris10 FindBall Sensor.  This program
 * demonstrates how to use that API.
 *
 * Changelog:
 * - 0.1: Initial release
 *
 * Credits:
 * - Big thanks to Tris10 for providing me with the hardware necessary to write and test this.
 *
 * License: You may use this code as you wish, provided you give credit where it's due.
 *
 * THIS CODE WILL ONLY WORK WITH ROBOTC VERSION 3.59 AND HIGHER.

 * Xander Soldaat (xander_at_botbench.com)
 * date 25 February 2014
 * version 0.1
 */

#include "drivers/tris10-findball.h"

task main () {
  nNxtButtonTask  = -2;
  int strength_1;
  int strength_2;
  int strength_3;
  int strength_4;
  int strength_5;

  nxtDisplayCenteredTextLine(0, "Tris10");
  nxtDisplayCenteredBigTextLine(1, "FindBall");
  nxtDisplayCenteredTextLine(3, "Test 1");
  nxtDisplayCenteredTextLine(5, "Connect sensor");
  nxtDisplayCenteredTextLine(6, "to S1");
  wait1Msec(2000);

  eraseDisplay();
  nxtDisplayCenteredTextLine(0, "Tris10 FindBall");
  while (true) {
		nxtEraseRect(0, 0, 99, 50);

  	T10FBreadAllStrength(TR10FB, &strength_1, &strength_2, &strength_3, &strength_4, &strength_5);

    // Read the current data from the sensor

    nxtFillRect( 5, strength_1/4, 10, 0);
    nxtFillRect(15, strength_2/4, 20, 0);
    nxtFillRect(25, strength_3/4, 30, 0);
    nxtFillRect(35, strength_4/4, 40, 0);
    nxtFillRect(45, strength_5/4, 50, 0);
    nxtDisplayStringAt(52, 40,"  1: %3d", strength_1);
    nxtDisplayStringAt(52, 32,"  2: %3d", strength_2);
    nxtDisplayStringAt(52, 24,"  3: %3d", strength_3);
    nxtDisplayStringAt(52, 16,"  4: %3d", strength_4);
    nxtDisplayStringAt(52,  8,"  5: %3d", strength_5);

    wait1Msec(100);
  }
}
